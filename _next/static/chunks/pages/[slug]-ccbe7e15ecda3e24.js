(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[431],{3760:(e,r,t)=>{"use strict";t.r(r),t.d(r,{__N_SSG:()=>ei,default:()=>en});var o=t(7876),i=t(7145),n=t(4657),a=t(2777),s=t(2008),l=t(9585),d=t(5820),c=t(1920),x=t(4985),h=t(4232),m=t(1205),u=t(7712),g=t(4587),p=t.n(g),b=t(6314);function j(e){let{images:r}=e,[t,i]=(0,h.useState)(!1),[n,a]=(0,h.useState)(0),s=r.map(e=>({src:e.src,description:e.alt}));return(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:16,margin:"16px 0",width:"100%"},children:[r.map((e,r)=>(0,o.jsxs)("div",{style:{width:"100%"},children:[(0,o.jsx)(p(),{src:e.src,alt:e.alt,width:600,height:400,style:{width:"100%",height:"auto",objectFit:"cover",cursor:"pointer",borderRadius:8,boxShadow:"0 2px 16px #00336622",background:"#eee",display:"block"},onClick:()=>{i(!0),a(r)}}),e.alt&&(0,o.jsx)("div",{style:{textAlign:"center",fontSize:14,color:"#555",marginTop:4},children:e.alt})]},e.src)),t&&(0,o.jsx)(b.Ay,{open:t,close:()=>i(!1),slides:s,index:n,on:{view:e=>{let{index:r}=e;return a(r)}},render:{description:e=>{let{description:r}=e;return r&&(0,o.jsx)("div",{style:{textAlign:"center",marginTop:8,color:"#fff",fontSize:16},children:r})}}})]})}t(3655);var f=t(6042),A=t(9818),y=t(2964);let v=null;try{let e=(0,f.Dk)().length?(0,f.Dk)()[0]:(0,f.Wp)({apiKey:"AIzaSyCPcfUYxD4RW3SI0LvsF_9NaSzCy98BahM",authDomain:"norrskensleder-blog.firebaseapp.com",projectId:"norrskensleder-blog",storageBucket:"norrskensleder-blog.firebasestorage.app",messagingSenderId:"380176904436",appId:"1:380176904436:web:ef9b7ff8ee2317be9caea1",measurementId:"G-F04L0DMFCB"});(0,A.Ay)(e,{provider:new A._u("6LdT6KArAAAAALJhlY-vD4FYEldkjpHdz-qK5Cef"),isTokenAutoRefreshEnabled:!0}),v=(0,y.aU)(e)}catch(e){console.warn("Firebase failed to initialize, continuing without database:",e.message)}var w=t(8311),k=t(139),S=t(20),C=t(5532),I=t(7020),R=t(4259),W=t(5063),z=t(8001),B=t(106),T=t(4928),_=t(4959),D=t(9181),E=t(2527);function F(e){let r=new Date().toISOString().slice(0,10);return"voted_".concat(e,"_").concat(r)}function P(e){let{slug:r}=e,[t,i]=(0,h.useState)({like:0,dislike:0}),[n,l]=(0,h.useState)(!0),[c,x]=(0,h.useState)(!1),[m,u]=(0,h.useState)(!1),[g,p]=(0,h.useState)(null);async function b(e){if(!c&&!m){if(!v)return void p("Voting is currently unavailable. Please try again later.");u(!0),p(null);try{let t=(0,y.doc)(v,"likes",r);(await (0,y.getDoc)(t)).exists()||await (0,y.BN)(t,{like:0,dislike:0}),await (0,y.mZ)(t,{[e]:(0,y.GV)(1)});let o=await (0,y.getDoc)(t);i(o.data());try{localStorage.setItem(F(r),"1")}catch(e){console.warn("Cannot save to localStorage:",e)}x(!0)}catch(e){console.error("Error voting:",e),p("Failed to record your vote. Please try again.")}finally{u(!1)}}}return((0,h.useEffect)(()=>{if(!v){l(!1),i({like:0,dislike:0}),p("Voting is disabled in development mode.");return}!async function(){try{let e=(0,y.doc)(v,"likes",r),t=await (0,y.getDoc)(e);t.exists()&&i(t.data()),p(null)}catch(e){console.error("Error fetching like counts:",e),p("Failed to load reactions")}finally{l(!1)}}();try{x(!!localStorage.getItem(F(r)))}catch(e){console.warn("localStorage not available:",e),x(!1)}},[r]),n)?(0,o.jsx)(s.A,{sx:{my:4,textAlign:"center"},children:(0,o.jsxs)(w.A,{sx:{p:3,borderRadius:3,maxWidth:400,mx:"auto"},children:[(0,o.jsx)(k.A,{variant:"text",width:"40%",height:24,sx:{mx:"auto",mb:2}}),(0,o.jsxs)(s.A,{sx:{display:"flex",justifyContent:"center",gap:2},children:[(0,o.jsx)(k.A,{variant:"rectangular",width:100,height:40,sx:{borderRadius:2}}),(0,o.jsx)(k.A,{variant:"rectangular",width:100,height:40,sx:{borderRadius:2}})]})]})}):(0,o.jsx)(s.A,{sx:{my:4,textAlign:"center"},children:(0,o.jsxs)(w.A,{elevation:3,sx:{p:3,borderRadius:3,maxWidth:400,mx:"auto",backgroundColor:"background.paper",border:"1px solid",borderColor:"divider"},children:[(0,o.jsx)(a.A,{variant:"h6",gutterBottom:!0,sx:{mb:2,color:"text.primary"},children:"Was this helpful?"}),g&&(0,o.jsx)(S.A,{in:!!g,children:(0,o.jsx)(C.A,{severity:"error",icon:(0,o.jsx)(z.A,{}),sx:{mb:2},onClose:()=>p(null),children:g})}),(0,o.jsxs)(I.A,{variant:"contained",size:"large",sx:{mb:2,boxShadow:"none","& .MuiButton-root":{borderRadius:"24px",px:3,py:1.5,minWidth:120,fontWeight:"bold"},"& .MuiButton-root:first-of-type":{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:"1px solid rgba(255,255,255,0.3)"},"& .MuiButton-root:last-of-type":{borderTopLeftRadius:0,borderBottomLeftRadius:0}},children:[(0,o.jsx)(R.A,{onClick:()=>b("like"),disabled:c||m,startIcon:m?(0,o.jsx)(W.A,{size:20,color:"inherit"}):c?(0,o.jsx)(B.A,{}):(0,o.jsx)(T.A,{}),sx:{backgroundColor:c?"success.light":"success.main",color:"success.contrastText","&:hover":{backgroundColor:c?"success.light":"success.dark"},"&:disabled":{backgroundColor:c?"success.light":"action.disabledBackground",color:c?"success.contrastText":"action.disabled"}},children:t.like||0}),(0,o.jsx)(R.A,{onClick:()=>b("dislike"),disabled:c||m,startIcon:m?(0,o.jsx)(W.A,{size:20,color:"inherit"}):c?(0,o.jsx)(_.A,{}):(0,o.jsx)(D.A,{}),sx:{backgroundColor:c?"error.light":"error.main",color:"error.contrastText","&:hover":{backgroundColor:c?"error.light":"error.dark"},"&:disabled":{backgroundColor:c?"error.light":"action.disabledBackground",color:c?"error.contrastText":"action.disabled"}},children:t.dislike||0})]}),c&&(0,o.jsx)(S.A,{in:c,children:(0,o.jsxs)(s.A,{children:[(0,o.jsx)(d.A,{icon:(0,o.jsx)(E.A,{}),label:"Thanks for your feedback!",color:"primary",variant:"outlined",sx:{mb:1}}),(0,o.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"You can vote again tomorrow"})]})}),m&&!c&&(0,o.jsx)(a.A,{variant:"body2",color:"primary.main",sx:{fontStyle:"italic"},children:"Recording your feedback..."}),(t.like>0||t.dislike>0)&&(0,o.jsx)(s.A,{sx:{mt:2,pt:2,borderTop:"1px solid",borderColor:"divider"},children:(0,o.jsxs)(a.A,{variant:"caption",color:"text.secondary",children:[t.like+t.dislike," total votes"]})})]})})}var L=t(1519),U=t(1804),N=t(7025),Y=t(4349),M=t(8769),H=t(1539),J=t(2080),O=t(7199),V=t(4260),q=t(8907);function G(e){let{slug:r}=e,[t,i]=(0,h.useState)([]),[n,l]=(0,h.useState)(""),[c,x]=(0,h.useState)(""),[m,u]=(0,h.useState)(!0),[g,p]=(0,h.useState)(!1),[b,j]=(0,h.useState)(null),[f,A]=(0,h.useState)(!1);async function I(e){if(e.preventDefault(),n.trim()&&c.trim()){if(!v)return void j("Commenting is disabled in development mode.");p(!0),j(null),A(!1);try{await (0,y.gS)((0,y.rJ)(v,"comments",r,"items"),{name:n.trim(),text:c.trim(),created:Date.now()}),x(""),A(!0),setTimeout(()=>A(!1),3e3)}catch(e){console.error("Error posting comment:",e),j("Failed to post comment. Please check your internet connection and try again.")}finally{p(!1)}}}return(0,h.useEffect)(()=>{if(!v){u(!1),i([]);return}let e=(0,y.P)((0,y.rJ)(v,"comments",r,"items"),(0,y.My)("created","asc")),t=(0,y.aQ)(e,e=>{i(e.docs.map(e=>({id:e.id,...e.data()}))),u(!1),j(null)},e=>{console.error("Error loading comments:",e),j("Failed to load comments. Please check your internet connection and try again."),u(!1)});return()=>t()},[r]),(0,o.jsxs)(s.A,{sx:{mt:4,maxWidth:800,mx:"auto"},children:[(0,o.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,o.jsx)(O.A,{sx:{mr:1,color:"primary.main"}}),(0,o.jsxs)(a.A,{variant:"h5",component:"h3",color:"primary.main",children:["Comments (",t.length,")"]})]}),(0,o.jsx)(S.A,{in:f,children:(0,o.jsx)(C.A,{severity:"success",icon:(0,o.jsx)(E.A,{}),sx:{mb:2},onClose:()=>A(!1),children:"Comment posted successfully!"})}),b&&(0,o.jsx)(C.A,{severity:"error",icon:(0,o.jsx)(z.A,{}),sx:{mb:2},onClose:()=>j(null),children:b}),(0,o.jsxs)(w.A,{elevation:2,sx:{p:3,mb:3,borderRadius:3,backgroundColor:"background.paper",border:"1px solid",borderColor:"divider"},children:[(0,o.jsxs)(a.A,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[(0,o.jsx)(V.A,{sx:{mr:1}}),"Join the conversation"]}),(0,o.jsxs)(s.A,{component:"form",onSubmit:I,sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,o.jsx)(L.A,{label:"Your name",variant:"outlined",value:n,onChange:e=>l(e.target.value),required:!0,fullWidth:!0,disabled:g,sx:{backgroundColor:"background.default"},InputProps:{startAdornment:(0,o.jsx)(V.A,{sx:{mr:1,color:"text.secondary"}})}}),(0,o.jsx)(L.A,{label:"Your comment",variant:"outlined",value:c,onChange:e=>x(e.target.value),required:!0,multiline:!0,rows:3,fullWidth:!0,disabled:g,sx:{backgroundColor:"background.default"},placeholder:"Share your thoughts..."}),(0,o.jsx)(R.A,{type:"submit",variant:"contained",disabled:g||!n.trim()||!c.trim(),startIcon:g?(0,o.jsx)(W.A,{size:20,color:"inherit"}):(0,o.jsx)(q.A,{}),sx:{alignSelf:"flex-end",borderRadius:2,px:3,py:1},children:g?"Posting...":"Post Comment"})]})]}),m?(0,o.jsx)(s.A,{sx:{mt:2},children:[void 0,void 0,void 0].map((e,r)=>(0,o.jsx)(w.A,{sx:{p:2,mb:2,borderRadius:2},children:(0,o.jsxs)(s.A,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[(0,o.jsx)(k.A,{variant:"circular",width:40,height:40}),(0,o.jsxs)(s.A,{sx:{flex:1},children:[(0,o.jsx)(k.A,{variant:"text",width:"30%",height:20}),(0,o.jsx)(k.A,{variant:"text",width:"100%",height:16}),(0,o.jsx)(k.A,{variant:"text",width:"80%",height:16})]})]})},r))}):b&&0===t.length?(0,o.jsxs)(w.A,{sx:{p:4,textAlign:"center",backgroundColor:"error.lighter",borderRadius:3},children:[(0,o.jsx)(z.A,{sx:{fontSize:48,color:"error.main",mb:2}}),(0,o.jsx)(a.A,{variant:"h6",color:"error.main",gutterBottom:!0,children:"Unable to load comments"}),(0,o.jsx)(a.A,{color:"text.secondary",children:"Please refresh the page to try again."})]}):0===t.length?(0,o.jsxs)(w.A,{sx:{p:4,textAlign:"center",backgroundColor:"grey.50",borderRadius:3,border:"1px dashed",borderColor:"grey.300"},children:[(0,o.jsx)(O.A,{sx:{fontSize:48,color:"grey.400",mb:2}}),(0,o.jsx)(a.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No comments yet"}),(0,o.jsx)(a.A,{color:"text.secondary",children:"Be the first to share your thoughts!"})]}):(0,o.jsx)(U.A,{sx:{backgroundColor:"background.paper",borderRadius:3,overflow:"hidden",border:"1px solid",borderColor:"divider"},children:t.map((e,r)=>{var i;return(0,o.jsxs)(s.A,{children:[(0,o.jsxs)(N.Ay,{alignItems:"flex-start",sx:{py:2,"&:hover":{backgroundColor:"action.hover"}},children:[(0,o.jsx)(Y.A,{children:(0,o.jsx)(M.A,{sx:{bgcolor:"primary.main",color:"primary.contrastText",fontWeight:"bold"},children:e.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)})}),(0,o.jsx)(H.A,{primary:(0,o.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:.5},children:[(0,o.jsx)(a.A,{component:"span",variant:"subtitle2",color:"primary.main",fontWeight:"bold",children:e.name}),e.created&&(0,o.jsx)(d.A,{label:(i=e.created)?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",size:"small",variant:"outlined",sx:{height:20,fontSize:"0.75rem",color:"text.secondary",borderColor:"divider"}})]}),secondary:(0,o.jsx)(a.A,{component:"div",variant:"body2",color:"text.primary",sx:{mt:1,lineHeight:1.6,wordBreak:"break-word"},children:e.text})})]}),r<t.length-1&&(0,o.jsx)(J.A,{variant:"inset",component:"li"})]},e.id||r)})})]})}var K=t(2535),X=t(1157),Q=t(3518),Z=t(3236),$=t(1973),ee=t(3535),er=t(519),et=t(8230),eo=t.n(et);t(5105);var ei=!0;function en(e){let{post:r}=e,t=(0,K.j)(r);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(K.A,{...t,image:r.coverImage||"/norrskensleder/banner.jpg"}),(0,o.jsx)(c.A,{}),(0,o.jsx)(X.HD,{role:"main",id:"main-content","aria-label":"Blog post content",children:(0,o.jsxs)(i.A,{maxWidth:"md",sx:{mt:4},children:[(0,o.jsxs)(n.A,{"aria-label":"Breadcrumb navigation",sx:{mb:3},separator:"›",children:[(0,o.jsx)(eo(),{href:"/",children:(0,o.jsxs)("span",{style:{display:"flex",alignItems:"center",color:"var(--mui-palette-primary-main)",textDecoration:"none"},children:[(0,o.jsx)(Q.A,{style:{marginRight:"4px",fontSize:20}}),"Home"]})}),(0,o.jsx)(eo(),{href:"/blog",children:(0,o.jsx)("span",{style:{color:"var(--mui-palette-primary-main)",textDecoration:"none"},children:"Blog"})}),(0,o.jsx)(a.A,{color:"text.primary",children:r.title})]}),(0,o.jsxs)(s.A,{component:"header",sx:{mb:4},children:[(0,o.jsx)(X.tn,{level:2,sx:{mb:2,fontSize:{xs:"1.5rem",sm:"2rem",md:"3.5rem"},wordBreak:"break-word"},children:r.title}),(0,o.jsxs)(s.A,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:2,mb:2,justifyContent:"space-between",width:"100%",maxWidth:"100%",minWidth:0,overflow:"hidden"},children:[(0,o.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap",minWidth:0,maxWidth:"100%"},children:[(0,o.jsxs)(a.A,{variant:"subtitle2",color:"text.secondary",component:"time",dateTime:r.date,children:["Published: ",new Date(r.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),r.readingTime&&(0,o.jsxs)(a.A,{variant:"subtitle2",color:"text.secondary",children:["• ",r.readingTime," min read"]})]}),(0,o.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1,ml:"auto",flexWrap:"wrap",minWidth:0,maxWidth:"100%"},children:[(0,o.jsx)(l.A,{component:"a",href:"https://twitter.com/intent/tweet?url=".concat(encodeURIComponent("https://norrskensleder.com/"+r.slug),"&text=").concat(encodeURIComponent(r.title)),target:"_blank",rel:"noopener noreferrer",size:"small","aria-label":"Share on Twitter",sx:{"&:hover svg":{color:"#005cbf"}},children:(0,o.jsx)(Z.A,{fontSize:"small"})}),(0,o.jsx)(l.A,{component:"a",href:"https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent("https://norrskensleder.com/"+r.slug)),target:"_blank",rel:"noopener noreferrer",size:"small","aria-label":"Share on Facebook",sx:{"&:hover svg":{color:"#005cbf"}},children:(0,o.jsx)($.A,{fontSize:"small"})}),(0,o.jsx)(l.A,{component:"a",href:"https://www.linkedin.com/shareArticle?mini=true&url=".concat(encodeURIComponent("https://norrskensleder.com/"+r.slug),"&title=").concat(encodeURIComponent(r.title)),target:"_blank",rel:"noopener noreferrer",size:"small","aria-label":"Share on LinkedIn",sx:{"&:hover svg":{color:"#005cbf"}},children:(0,o.jsx)(ee.A,{fontSize:"small"})})]})]}),r.tags&&(0,o.jsx)(s.A,{sx:{mb:3},role:"navigation","aria-label":"Article tags",children:r.tags.map(e=>(0,o.jsx)(d.A,{label:e,component:eo(),href:"/tag/".concat(e),clickable:!0,size:"small",icon:(0,o.jsx)(er.A,{fontSize:"small"}),sx:{mr:1,mb:1},"aria-label":"View all posts tagged with ".concat(e)},e))})]}),r.coverImage&&(0,o.jsxs)("figure",{style:{margin:"24px 0",textAlign:"center",maxWidth:"100%",overflow:"auto"},children:[(0,o.jsx)(p(),{src:r.coverImage,alt:r.imageAlt||'Cover image for "'.concat(r.title,'"'),width:1200,height:630,priority:!0,style:{maxWidth:"100%",height:"auto",borderRadius:8,boxShadow:"0 2px 16px #00336622",display:"block",minWidth:0}}),r.imageCaption&&(0,o.jsx)("figcaption",{style:{marginTop:8,fontSize:"0.875rem",color:"#666",fontStyle:"italic"},children:r.imageCaption})]}),r.youtube&&(0,o.jsxs)(s.A,{sx:{my:3},children:[(0,o.jsx)("iframe",{width:"100%",height:"550",src:r.youtube.replace("watch?v=","embed/"),title:"YouTube video: ".concat(r.title),frameBorder:"0",allowFullScreen:!0,"aria-describedby":"video-description"}),(0,o.jsx)(a.A,{id:"video-description",variant:"caption",sx:{display:"block",mt:1,color:"text.secondary"},children:"Embedded video related to this article"})]}),(0,o.jsx)(s.A,{component:"article",sx:{mt:3,mb:4,width:"100%",maxWidth:"100%",overflowX:"auto",minWidth:0},"aria-label":"Article content",children:(0,o.jsx)(es,{content:r.content})}),(0,o.jsx)(s.A,{sx:{position:"fixed",top:0,left:0,right:0,height:4,zIndex:1e3},children:(0,o.jsx)(ea,{})}),(0,o.jsxs)(s.A,{component:"footer",sx:{mt:6},children:[(0,o.jsx)(P,{slug:r.slug}),(0,o.jsx)(G,{slug:r.slug})]})]})}),(0,o.jsx)(x.A,{})]})}function ea(){let[e,r]=h.useState(0);return h.useEffect(()=>{let e=()=>{let e=window.pageYOffset;r(Math.min(e/(document.documentElement.scrollHeight-window.innerHeight)*100,100))};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,o.jsx)(s.A,{sx:{width:"".concat(e,"%"),height:"100%",background:"linear-gradient(90deg, #005cbf 0%, #0070f3 100%)",transition:"width 0.1s ease-out"},role:"progressbar","aria-valuenow":Math.round(e),"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Reading progress"})}function es(e){let{content:r}=e,t=r.split(/<!--gallery-->/g),i=/^!\[(.*)\]\((.*)\)$/,n=e=>{let{src:r,alt:t}=e;return(0,o.jsx)(p(),{src:r,alt:t,width:800,height:600,style:{maxWidth:"100%",height:"auto",borderRadius:8,boxShadow:"0 2px 16px #00336622",margin:"16px 0",minWidth:0}})},a=e=>{let{href:r,children:t}=e,i=r.match(/^https?:\/\/(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)([\w-]+)/);if(i){let e=i[3];return(0,o.jsx)("iframe",{width:"100%",height:"550",src:"https://www.youtube.com/embed/".concat(e),title:"YouTube video",frameBorder:"0",allowFullScreen:!0,style:{display:"block",margin:"24px 0"}})}return(0,o.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",children:t})},s=e=>{var r;let{node:t,children:i}=e;return Array.isArray(i)&&1===i.length&&(null==(r=i[0])?void 0:r.type)==="iframe"?i:(0,o.jsx)("p",{children:i})};return(0,o.jsx)(o.Fragment,{children:t.map((e,r)=>{let t=e.trim().split("\n").filter(Boolean),l=t.map(e=>{let r=e.match(i);return r?{src:r[2],alt:r[1]}:null}).filter(Boolean);return l.length>=2&&l.length===t.length&&t.length>0?(0,o.jsx)(j,{images:l},r):(0,o.jsx)(m.oz,{remarkPlugins:[u.A],components:{img:n,a:a,p:s},children:e},r)})})}},7484:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/[slug]",function(){return t(3760)}])}},e=>{e.O(0,[659,861,20,820,412,624,636,593,792],()=>e(e.s=7484)),_N_E=e.O()}]);