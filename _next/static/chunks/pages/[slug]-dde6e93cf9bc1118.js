(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[431],{3978:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__N_SSG:()=>en,default:()=>ei});var o=r(7876),n=r(964),i=r(1284),a=r(1428),s=r(6520),l=r(4527),c=r(3085),d=r(703),x=r(6790),m=r(4232),h=r(1205),u=r(7712),g=r(3933);function p(e){let{images:t}=e,[r,n]=(0,m.useState)(!1),[i,a]=(0,m.useState)(0),s=t.map(e=>({src:e.src,description:e.alt}));return(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:16,margin:"16px 0",width:"100%"},children:[t.map((e,t)=>(0,o.jsxs)("div",{style:{width:"100%"},children:[(0,o.jsx)("img",{src:e.src,alt:e.alt,style:{width:"100%",aspectRatio:"3/2",objectFit:"cover",cursor:"pointer",borderRadius:8,boxShadow:"0 2px 16px #00336622",background:"#eee",display:"block"},onClick:()=>{n(!0),a(t)}}),e.alt&&(0,o.jsx)("div",{style:{textAlign:"center",fontSize:14,color:"#555",marginTop:4},children:e.alt})]},e.src)),r&&(0,o.jsx)(g.Ay,{open:r,close:()=>n(!1),slides:s,index:i,on:{view:e=>{let{index:t}=e;return a(t)}},render:{description:e=>{let{description:t}=e;return t&&(0,o.jsx)("div",{style:{textAlign:"center",marginTop:8,color:"#fff",fontSize:16},children:t})}}})]})}r(9986);var b=r(6042),j=r(9818),f=r(2964);let y=null;try{let e=(0,b.Dk)().length?(0,b.Dk)()[0]:(0,b.Wp)({apiKey:"AIzaSyCPcfUYxD4RW3SI0LvsF_9NaSzCy98BahM",authDomain:"norrskensleder-blog.firebaseapp.com",projectId:"norrskensleder-blog",storageBucket:"norrskensleder-blog.firebasestorage.app",messagingSenderId:"380176904436",appId:"1:380176904436:web:ef9b7ff8ee2317be9caea1",measurementId:"G-F04L0DMFCB"});(0,j.Ay)(e,{provider:new j._u("6LdT6KArAAAAALJhlY-vD4FYEldkjpHdz-qK5Cef"),isTokenAutoRefreshEnabled:!0}),y=(0,f.aU)(e)}catch(e){console.warn("Firebase failed to initialize, continuing without database:",e.message)}var A=r(1054),v=r(6378),w=r(350),k=r(7438),S=r(7816),C=r(7481),I=r(5965),R=r(2224),W=r(2071),z=r(6741),B=r(3318),T=r(9060),_=r(7366);function D(e){let t=new Date().toISOString().slice(0,10);return"voted_".concat(e,"_").concat(t)}function E(e){let{slug:t}=e,[r,n]=(0,m.useState)({like:0,dislike:0}),[i,l]=(0,m.useState)(!0),[d,x]=(0,m.useState)(!1),[h,u]=(0,m.useState)(!1),[g,p]=(0,m.useState)(null);async function b(e){if(!d&&!h){if(!y)return void p("Voting is currently unavailable. Please try again later.");u(!0),p(null);try{let r=(0,f.doc)(y,"likes",t);(await (0,f.getDoc)(r)).exists()||await (0,f.BN)(r,{like:0,dislike:0}),await (0,f.mZ)(r,{[e]:(0,f.GV)(1)});let o=await (0,f.getDoc)(r);n(o.data());try{localStorage.setItem(D(t),"1")}catch(e){console.warn("Cannot save to localStorage:",e)}x(!0)}catch(e){console.error("Error voting:",e),p("Failed to record your vote. Please try again.")}finally{u(!1)}}}return((0,m.useEffect)(()=>{!async function(){try{let e=(0,f.doc)(y,"likes",t),r=await (0,f.getDoc)(e);r.exists()&&n(r.data()),p(null)}catch(e){console.error("Error fetching like counts:",e),p("Failed to load reactions")}finally{l(!1)}}();try{x(!!localStorage.getItem(D(t)))}catch(e){console.warn("localStorage not available:",e),x(!1)}},[t]),i)?(0,o.jsx)(s.A,{sx:{my:4,textAlign:"center"},children:(0,o.jsxs)(A.A,{sx:{p:3,borderRadius:3,maxWidth:400,mx:"auto"},children:[(0,o.jsx)(v.A,{variant:"text",width:"40%",height:24,sx:{mx:"auto",mb:2}}),(0,o.jsxs)(s.A,{sx:{display:"flex",justifyContent:"center",gap:2},children:[(0,o.jsx)(v.A,{variant:"rectangular",width:100,height:40,sx:{borderRadius:2}}),(0,o.jsx)(v.A,{variant:"rectangular",width:100,height:40,sx:{borderRadius:2}})]})]})}):(0,o.jsx)(s.A,{sx:{my:4,textAlign:"center"},children:(0,o.jsxs)(A.A,{elevation:3,sx:{p:3,borderRadius:3,maxWidth:400,mx:"auto",backgroundColor:"background.paper",border:"1px solid",borderColor:"divider"},children:[(0,o.jsx)(a.A,{variant:"h6",gutterBottom:!0,sx:{mb:2,color:"text.primary"},children:"Was this helpful?"}),g&&(0,o.jsx)(w.A,{in:!!g,children:(0,o.jsx)(k.A,{severity:"error",icon:(0,o.jsx)(R.A,{}),sx:{mb:2},onClose:()=>p(null),children:g})}),(0,o.jsxs)(S.A,{variant:"contained",size:"large",sx:{mb:2,boxShadow:"none","& .MuiButton-root":{borderRadius:"24px",px:3,py:1.5,minWidth:120,fontWeight:"bold"},"& .MuiButton-root:first-of-type":{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:"1px solid rgba(255,255,255,0.3)"},"& .MuiButton-root:last-of-type":{borderTopLeftRadius:0,borderBottomLeftRadius:0}},children:[(0,o.jsx)(C.A,{onClick:()=>b("like"),disabled:d||h,startIcon:h?(0,o.jsx)(I.A,{size:20,color:"inherit"}):d?(0,o.jsx)(W.A,{}):(0,o.jsx)(z.A,{}),sx:{backgroundColor:d?"success.light":"success.main",color:"success.contrastText","&:hover":{backgroundColor:d?"success.light":"success.dark"},"&:disabled":{backgroundColor:d?"success.light":"action.disabledBackground",color:d?"success.contrastText":"action.disabled"}},children:r.like||0}),(0,o.jsx)(C.A,{onClick:()=>b("dislike"),disabled:d||h,startIcon:h?(0,o.jsx)(I.A,{size:20,color:"inherit"}):d?(0,o.jsx)(B.A,{}):(0,o.jsx)(T.A,{}),sx:{backgroundColor:d?"error.light":"error.main",color:"error.contrastText","&:hover":{backgroundColor:d?"error.light":"error.dark"},"&:disabled":{backgroundColor:d?"error.light":"action.disabledBackground",color:d?"error.contrastText":"action.disabled"}},children:r.dislike||0})]}),d&&(0,o.jsx)(w.A,{in:d,children:(0,o.jsxs)(s.A,{children:[(0,o.jsx)(c.A,{icon:(0,o.jsx)(_.A,{}),label:"Thanks for your feedback!",color:"primary",variant:"outlined",sx:{mb:1}}),(0,o.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"You can vote again tomorrow"})]})}),h&&!d&&(0,o.jsx)(a.A,{variant:"body2",color:"primary.main",sx:{fontStyle:"italic"},children:"Recording your feedback..."}),(r.like>0||r.dislike>0)&&(0,o.jsx)(s.A,{sx:{mt:2,pt:2,borderTop:"1px solid",borderColor:"divider"},children:(0,o.jsxs)(a.A,{variant:"caption",color:"text.secondary",children:[r.like+r.dislike," total votes"]})})]})})}var F=r(5505),P=r(510),L=r(9281),U=r(5798),N=r(2594),Y=r(1897),M=r(9299),H=r(4687),O=r(4927),J=r(504);function q(e){let{slug:t}=e,[r,n]=(0,m.useState)([]),[i,l]=(0,m.useState)(""),[d,x]=(0,m.useState)(""),[h,u]=(0,m.useState)(!0),[g,p]=(0,m.useState)(!1),[b,j]=(0,m.useState)(null),[S,W]=(0,m.useState)(!1);async function z(e){if(e.preventDefault(),i.trim()&&d.trim()){p(!0),j(null),W(!1);try{p(!0),j(null),W(!1);try{await (0,f.gS)((0,f.rJ)(y,"comments",t,"items"),{name:i.trim(),text:d.trim(),created:Date.now()}),x(""),W(!0),setTimeout(()=>W(!1),3e3)}catch(e){console.error("Error posting comment:",e),j("Failed to post comment. Please check your internet connection and try again.")}finally{p(!1)}W(!0),setTimeout(()=>W(!1),3e3)}catch(e){console.error("Error posting comment:",e),j("Failed to post comment. Please check your internet connection and try again.")}finally{p(!1)}}}return(0,m.useEffect)(()=>{let e=(0,f.P)((0,f.rJ)(y,"comments",t,"items"),(0,f.My)("created","asc")),r=(0,f.aQ)(e,e=>{n(e.docs.map(e=>({id:e.id,...{id:e.id,...e.data()}}))),u(!1),j(null)},e=>{console.error("Error loading comments:",e),j("Failed to load comments. Please check your internet connection and try again."),u(!1),j(null)},e=>{console.error("Error loading comments:",e),j("Failed to load comments. Please check your internet connection and try again."),u(!1)});return()=>r()},[t]),(0,o.jsxs)(s.A,{sx:{mt:4,maxWidth:800,mx:"auto"},children:[(0,o.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,o.jsx)(H.A,{sx:{mr:1,color:"primary.main"}}),(0,o.jsxs)(a.A,{variant:"h5",component:"h3",color:"primary.main",children:["Comments (",r.length,")"]})]}),(0,o.jsx)(w.A,{in:S,children:(0,o.jsx)(k.A,{severity:"success",icon:(0,o.jsx)(_.A,{}),sx:{mb:2},onClose:()=>W(!1),children:"Comment posted successfully!"})}),b&&(0,o.jsx)(k.A,{severity:"error",icon:(0,o.jsx)(R.A,{}),sx:{mb:2},onClose:()=>j(null),children:b}),(0,o.jsxs)(A.A,{elevation:2,sx:{p:3,mb:3,borderRadius:3,backgroundColor:"background.paper",border:"1px solid",borderColor:"divider"},children:[(0,o.jsxs)(a.A,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[(0,o.jsx)(O.A,{sx:{mr:1}}),"Join the conversation"]}),(0,o.jsxs)(s.A,{component:"form",onSubmit:z,sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,o.jsx)(F.A,{label:"Your name",variant:"outlined",value:i,onChange:e=>l(e.target.value),required:!0,fullWidth:!0,disabled:g,sx:{backgroundColor:"background.default"},InputProps:{startAdornment:(0,o.jsx)(O.A,{sx:{mr:1,color:"text.secondary"}})}}),(0,o.jsx)(F.A,{label:"Your comment",variant:"outlined",value:d,onChange:e=>x(e.target.value),required:!0,multiline:!0,rows:3,fullWidth:!0,disabled:g,sx:{backgroundColor:"background.default"},placeholder:"Share your thoughts..."}),(0,o.jsx)(C.A,{type:"submit",variant:"contained",disabled:g||!i.trim()||!d.trim(),startIcon:g?(0,o.jsx)(I.A,{size:20,color:"inherit"}):(0,o.jsx)(J.A,{}),sx:{alignSelf:"flex-end",borderRadius:2,px:3,py:1},children:g?"Posting...":"Post Comment"})]})]}),h?(0,o.jsx)(s.A,{sx:{mt:2},children:[void 0,void 0,void 0].map((e,t)=>(0,o.jsx)(A.A,{sx:{p:2,mb:2,borderRadius:2},children:(0,o.jsxs)(s.A,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[(0,o.jsx)(v.A,{variant:"circular",width:40,height:40}),(0,o.jsxs)(s.A,{sx:{flex:1},children:[(0,o.jsx)(v.A,{variant:"text",width:"30%",height:20}),(0,o.jsx)(v.A,{variant:"text",width:"100%",height:16}),(0,o.jsx)(v.A,{variant:"text",width:"80%",height:16})]})]})},t))}):b&&0===r.length?(0,o.jsxs)(A.A,{sx:{p:4,textAlign:"center",backgroundColor:"error.lighter",borderRadius:3},children:[(0,o.jsx)(R.A,{sx:{fontSize:48,color:"error.main",mb:2}}),(0,o.jsx)(a.A,{variant:"h6",color:"error.main",gutterBottom:!0,children:"Unable to load comments"}),(0,o.jsx)(a.A,{color:"text.secondary",children:"Please refresh the page to try again."})]}):0===r.length?(0,o.jsxs)(A.A,{sx:{p:4,textAlign:"center",backgroundColor:"grey.50",borderRadius:3,border:"1px dashed",borderColor:"grey.300"},children:[(0,o.jsx)(H.A,{sx:{fontSize:48,color:"grey.400",mb:2}}),(0,o.jsx)(a.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No comments yet"}),(0,o.jsx)(a.A,{color:"text.secondary",children:"Be the first to share your thoughts!"})]}):(0,o.jsx)(P.A,{sx:{backgroundColor:"background.paper",borderRadius:3,overflow:"hidden",border:"1px solid",borderColor:"divider"},children:r.map((e,t)=>{var n;return(0,o.jsxs)(s.A,{children:[(0,o.jsxs)(L.Ay,{alignItems:"flex-start",sx:{py:2,"&:hover":{backgroundColor:"action.hover"}},children:[(0,o.jsx)(U.A,{children:(0,o.jsx)(N.A,{sx:{bgcolor:"primary.main",color:"primary.contrastText",fontWeight:"bold"},children:e.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)})}),(0,o.jsx)(Y.A,{primary:(0,o.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:.5},children:[(0,o.jsx)(a.A,{component:"span",variant:"subtitle2",color:"primary.main",fontWeight:"bold",children:e.name}),e.created&&(0,o.jsx)(c.A,{label:(n=e.created)?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",size:"small",variant:"outlined",sx:{height:20,fontSize:"0.75rem",color:"text.secondary",borderColor:"divider"}})]}),secondary:(0,o.jsx)(a.A,{component:"div",variant:"body2",color:"text.primary",sx:{mt:1,lineHeight:1.6,wordBreak:"break-word"},children:e.text})})]}),t<r.length-1&&(0,o.jsx)(M.A,{variant:"inset",component:"li"})]},e.id||t)})})]})}var G=r(4926),K=r(6962),V=r(4369),X=r(9945),Q=r(4142),Z=r(6652),$=r(5026),ee=r(8230),et=r.n(ee),er=r(5105),eo=r.n(er),en=!0;function ei(e){let{post:t}=e,r=(0,G.j)(t);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eo(),{async:!0,src:"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3305345510108069",crossOrigin:"anonymous",strategy:"afterInteractive"}),(0,o.jsx)(G.A,{...r,image:t.coverImage||"/norrskensleder/banner.jpg"}),(0,o.jsx)(d.A,{}),(0,o.jsx)(K.HD,{role:"main",id:"main-content","aria-label":"Blog post content",children:(0,o.jsxs)(n.A,{maxWidth:"md",sx:{mt:4},children:[(0,o.jsxs)(i.A,{"aria-label":"Breadcrumb navigation",sx:{mb:3},separator:"›",children:[(0,o.jsx)(et(),{href:"/",children:(0,o.jsxs)("span",{style:{display:"flex",alignItems:"center",color:"var(--mui-palette-primary-main)",textDecoration:"none"},children:[(0,o.jsx)(V.A,{style:{marginRight:"4px",fontSize:20}}),"Home"]})}),(0,o.jsx)(et(),{href:"/blog",children:(0,o.jsx)("span",{style:{color:"var(--mui-palette-primary-main)",textDecoration:"none"},children:"Blog"})}),(0,o.jsx)(a.A,{color:"text.primary",children:t.title})]}),(0,o.jsxs)(s.A,{component:"header",sx:{mb:4},children:[(0,o.jsx)(K.tn,{level:2,sx:{mb:2,fontSize:{xs:"1.5rem",sm:"2rem",md:"3.5rem"},wordBreak:"break-word"},children:t.title}),(0,o.jsxs)(s.A,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:2,mb:2,justifyContent:"space-between",width:"100%",maxWidth:"100%",minWidth:0,overflow:"hidden"},children:[(0,o.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap",minWidth:0,maxWidth:"100%"},children:[(0,o.jsxs)(a.A,{variant:"subtitle2",color:"text.secondary",component:"time",dateTime:t.date,children:["Published: ",new Date(t.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),t.readingTime&&(0,o.jsxs)(a.A,{variant:"subtitle2",color:"text.secondary",children:["• ",t.readingTime," min read"]})]}),(0,o.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1,ml:"auto",flexWrap:"wrap",minWidth:0,maxWidth:"100%"},children:[(0,o.jsx)(l.A,{component:"a",href:"https://twitter.com/intent/tweet?url=".concat(encodeURIComponent("https://norrskensleder.com/"+t.slug),"&text=").concat(encodeURIComponent(t.title)),target:"_blank",rel:"noopener noreferrer",size:"small","aria-label":"Share on Twitter",sx:{"&:hover svg":{color:"#005cbf"}},children:(0,o.jsx)(X.A,{fontSize:"small"})}),(0,o.jsx)(l.A,{component:"a",href:"https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent("https://norrskensleder.com/"+t.slug)),target:"_blank",rel:"noopener noreferrer",size:"small","aria-label":"Share on Facebook",sx:{"&:hover svg":{color:"#005cbf"}},children:(0,o.jsx)(Q.A,{fontSize:"small"})}),(0,o.jsx)(l.A,{component:"a",href:"https://www.linkedin.com/shareArticle?mini=true&url=".concat(encodeURIComponent("https://norrskensleder.com/"+t.slug),"&title=").concat(encodeURIComponent(t.title)),target:"_blank",rel:"noopener noreferrer",size:"small","aria-label":"Share on LinkedIn",sx:{"&:hover svg":{color:"#005cbf"}},children:(0,o.jsx)(Z.A,{fontSize:"small"})})]})]}),t.tags&&(0,o.jsx)(s.A,{sx:{mb:3},role:"navigation","aria-label":"Article tags",children:t.tags.map(e=>(0,o.jsx)(c.A,{label:e,component:et(),href:"/tag/".concat(e),clickable:!0,size:"small",icon:(0,o.jsx)($.A,{fontSize:"small"}),sx:{mr:1,mb:1},"aria-label":"View all posts tagged with ".concat(e)},e))})]}),t.coverImage&&(0,o.jsxs)("figure",{style:{margin:"24px 0",textAlign:"center",maxWidth:"100%",overflow:"auto"},children:[(0,o.jsx)("img",{src:t.coverImage,alt:t.imageAlt||'Cover image for "'.concat(t.title,'"'),style:{maxWidth:"100%",width:"100%",height:"auto",borderRadius:8,boxShadow:"0 2px 16px #00336622",display:"block",minWidth:0},loading:"lazy"}),t.imageCaption&&(0,o.jsx)("figcaption",{style:{marginTop:8,fontSize:"0.875rem",color:"#666",fontStyle:"italic"},children:t.imageCaption})]}),t.youtube&&(0,o.jsxs)(s.A,{sx:{my:3},children:[(0,o.jsx)("iframe",{width:"100%",height:"400",src:t.youtube.replace("watch?v=","embed/"),title:"YouTube video: ".concat(t.title),frameBorder:"0",allowFullScreen:!0,"aria-describedby":"video-description"}),(0,o.jsx)(a.A,{id:"video-description",variant:"caption",sx:{display:"block",mt:1,color:"text.secondary"},children:"Embedded video related to this article"})]}),(0,o.jsx)(s.A,{component:"article",sx:{mt:3,mb:4,width:"100%",maxWidth:"100%",overflowX:"auto",minWidth:0},"aria-label":"Article content",children:(0,o.jsx)(es,{content:t.content})}),(0,o.jsx)(s.A,{sx:{position:"fixed",top:0,left:0,right:0,height:4,zIndex:1e3},children:(0,o.jsx)(ea,{})}),(0,o.jsxs)(s.A,{component:"footer",sx:{mt:6},children:[(0,o.jsx)(E,{slug:t.slug}),(0,o.jsx)(q,{slug:t.slug})]})]})}),(0,o.jsx)(x.A,{})]})}function ea(){let[e,t]=m.useState(0);return m.useEffect(()=>{let e=()=>{let e=window.pageYOffset;t(Math.min(e/(document.documentElement.scrollHeight-window.innerHeight)*100,100))};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,o.jsx)(s.A,{sx:{width:"".concat(e,"%"),height:"100%",background:"linear-gradient(90deg, #005cbf 0%, #0070f3 100%)",transition:"width 0.1s ease-out"},role:"progressbar","aria-valuenow":Math.round(e),"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Reading progress"})}function es(e){let{content:t}=e,r=t.split(/<!--gallery-->/g),n=/^!\[(.*)\]\((.*)\)$/,i=e=>{let{src:t,alt:r}=e;return(0,o.jsx)("img",{src:t,alt:r,style:{maxWidth:"100%",height:"auto",borderRadius:8,boxShadow:"0 2px 16px #00336622",margin:"16px 0",minWidth:0}})},a=e=>{let{href:t,children:r}=e,n=t.match(/^https?:\/\/(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)([\w-]+)/);if(n){let e=n[3];return(0,o.jsx)("iframe",{width:"100%",height:"400",src:"https://www.youtube.com/embed/".concat(e),title:"YouTube video",frameBorder:"0",allowFullScreen:!0,style:{display:"block",margin:"24px 0"}})}return(0,o.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:r})},s=e=>{var t;let{node:r,children:n}=e;return Array.isArray(n)&&1===n.length&&(null==(t=n[0])?void 0:t.type)==="iframe"?n:(0,o.jsx)("p",{children:n})};return(0,o.jsx)(o.Fragment,{children:r.map((e,t)=>{let r=e.trim().split("\n").filter(Boolean),l=r.map(e=>{let t=e.match(n);return t?{src:t[2],alt:t[1]}:null}).filter(Boolean);return l.length>=2&&l.length===r.length&&r.length>0?(0,o.jsx)(p,{images:l},t):(0,o.jsx)(h.oz,{remarkPlugins:[u.A],components:{img:i,a:a,p:s},children:e},t)})})}},7484:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/[slug]",function(){return r(3978)}])}},e=>{e.O(0,[659,904,20,85,913,844,636,593,792],()=>e(e.s=7484)),_N_E=e.O()}]);